<div class="card b-page-detail {{ isLoadingPage ? 'b-loading' : '' }}" *ngIf="!isLoadingPage">
    <div class="p-fluid p-formgrid grid b-header">
        <div class="card col-12 md:col-12 b-actions">
            <div class="flex justify-content-between flex-wrap card-container purple-container">
                <h5 class="title-info mb-0 ml-0"> Chi tiết sản phẩm </h5>
                <div>
                    <p-button 
                        styleClass="p-button-sm custom-button   border-600 b-button-back"
                        [routerLink]="'/project-manager/project-list/detail/' + cryptEncode(productInfo.projectId)" label="Quay lại"
                        icon="pi pi-chevron-left" class="b-0  ">
                    </p-button>
                </div>
            </div>
        </div>
    </div>
    <p-tabView styleClass="custom-tabview" [(activeIndex)]="activeIndex" (onChange)="changeTab($event)">
        <p-tabPanel [header]="'productInfo'" *ngIf="true || this.isGranted([this.PermissionRealStateConst.RealStateMenuProjectListDetail_ThongTinChung])">
            <ng-template pTemplate="header">
                <span> Thông tin chung </span>
            </ng-template>
            <app-add-product *ngIf="tabViewActive['productInfo']" [productId]="productId"></app-add-product>
        </p-tabPanel>
        <p-tabPanel [header]="'policy'" *ngIf="this.isGranted([this.PermissionRealStateConst.RealStateMenuProjectListDetail_ChinhSach])">
            <ng-template pTemplate="header">
                <span> Chính sách ưu đãi CĐT </span>
            </ng-template>
            <app-product-policy-incentives *ngIf="tabViewActive['policy']"></app-product-policy-incentives>
        </p-tabPanel>
        <p-tabPanel [header]="'utiliti'" *ngIf="this.isGranted([this.PermissionRealStateConst.RealStateMenuProjectListDetail_TienIch])">
            <ng-template pTemplate="header">
                <span> Tiện ích </span>
            </ng-template>
            <product-utility *ngIf="tabViewActive['utiliti']"></product-utility>
        </p-tabPanel>
        <p-tabPanel [header]="'material'" *ngIf="this.isGranted([this.PermissionRealStateConst.RealStateMenuProjectListDetail_VatLieu])">
            <ng-template pTemplate="header">
                <span> Vật liệu </span>
            </ng-template>
            <product-material *ngIf="tabViewActive['material']"></product-material>
        </p-tabPanel>
        <p-tabPanel [header]="'designDiagram'" *ngIf="this.isGranted([this.PermissionRealStateConst.RealStateMenuProjectListDetail_SoDoTK])">
            <ng-template pTemplate="header">
                <span> Sơ đồ thiết kế </span>
            </ng-template>
            <product-diagram *ngIf="tabViewActive['designDiagram']"></product-diagram>
        </p-tabPanel>
        <p-tabPanel [header]="'images'" *ngIf="this.isGranted([this.PermissionRealStateConst.RealStateProjectListDetail_HinhAnhDuAn])">
            <ng-template pTemplate="header">
                <span> Hình ảnh </span>
            </ng-template>
            <app-product-media *ngIf="tabViewActive['images']" [productId]="productId"></app-product-media>
        </p-tabPanel>
        <p-tabPanel [header]="'lichSu'" *ngIf="this.isGranted([this.PermissionRealStateConst.RealStateProjectListDetail_LichSu])">
            <ng-template pTemplate="header">
                <span> Lịch sử </span>
            </ng-template>
            <app-product-history *ngIf="tabViewActive['lichSu']" [productId]="productId"></app-product-history>
        </p-tabPanel>
    </p-tabView>
</div>